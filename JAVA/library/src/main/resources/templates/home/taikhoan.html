<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{home/layout}">
<head>
    <meta charset="UTF-8">
    <title>Tài Khoản Của Tôi - BookLib</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<div layout:fragment="main-content">

    <section class="account-hero">
        <div class="max-width-container">
            <h2 class="hero-title">Quản Lý Tài Khoản Của Bạn</h2>
            <p class="hero-description">Cập nhật thông tin cá nhân, cài đặt bảo mật và xem lịch sử giao dịch.</p>
        </div>
    </section>

    <section class="account-dashboard">
        <div class="max-width-container account-grid">

            <aside class="sidebar-nav">
                <div class="profile-overview">
                    <img th:src="@{/img/default-avatar.png}" alt="Avatar người dùng" class="profile-avatar">
                    <h4 class="profile-name">Nguyễn Văn Độc Giả</h4>
                    <p class="profile-email">docgia@booklib.com</p>
                </div>
                <nav>
                    <a href="#profile-info" class="sidebar-link active" data-tab="profile-info">
                        <i class="fas fa-user-circle"></i> Thông Tin Chung
                    </a>
                    <a href="#security" class="sidebar-link" data-tab="security">
                        <i class="fas fa-lock"></i> Bảo Mật
                    </a>
                    <a href="#borrow-history" class="sidebar-link" data-tab="borrow-history">
                        <i class="fas fa-history"></i> Lịch Sử Mượn Trả
                    </a>
                    <a href="#" class="sidebar-link logout-link">
                        <i class="fas fa-sign-out-alt"></i> Đăng Xuất
                    </a>
                </nav>
            </aside>

            <main class="account-content">
                <div id="profile-info" class="tab-content active">
                    <div class="account-card">
                        <h3 class="card-title">Cập Nhật Thông Tin Cá Nhân</h3>
                        <form class="auth-form">
                            <div class="form-group">
                                <label for="fullName">Họ và Tên</label>
                                <div class="input-group">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="fullName" value="Nguyễn Văn Độc Giả" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="email">Địa Chỉ Email</label>
                                <div class="input-group">
                                    <i class="fas fa-at"></i>
                                    <input type="email" id="email" value="docgia@booklib.com" disabled>
                                </div>
                                <small class="form-help-text">Email không thể thay đổi. Vui lòng liên hệ quản trị viên.</small>
                            </div>
                            <div class="form-group">
                                <label for="phone">Số Điện Thoại</label>
                                <div class="input-group">
                                    <i class="fas fa-phone-alt"></i>
                                    <input type="tel" id="phone" value="0866811434">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="address">Địa Chỉ</label>
                                <div class="input-group">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <input type="text" id="address" value="Số 123 Đường Sách, Q1, TP.HCM">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Lưu Thay Đổi</button>
                        </form>
                    </div>
                </div>

                <div id="security" class="tab-content">
                    <div class="account-card">
                        <h3 class="card-title">Cài Đặt Bảo Mật</h3>
                        <form class="auth-form">
                            <div class="form-group">
                                <label for="currentPassword">Mật Khẩu Hiện Tại</label>
                                <div class="input-group">
                                    <i class="fas fa-key"></i>
                                    <input type="password" id="currentPassword" placeholder="Nhập mật khẩu hiện tại" required>
                                    <button type="button" class="toggle-password"><i class="fas fa-eye"></i></button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="newPassword">Mật Khẩu Mới</label>
                                <div class="input-group">
                                    <i class="fas fa-key"></i>
                                    <input type="password" id="newPassword" placeholder="Nhập mật khẩu mới" required>
                                    <button type="button" class="toggle-password"><i class="fas fa-eye"></i></button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Xác Nhận Mật Khẩu Mới</label>
                                <div class="input-group">
                                    <i class="fas fa-key"></i>
                                    <input type="password" id="confirmPassword" placeholder="Xác nhận mật khẩu mới" required>
                                    <button type="button" class="toggle-password"><i class="fas fa-eye"></i></button>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Đổi Mật Khẩu</button>
                        </form>
                    </div>

                    <div class="account-card mt-4">
                        <h3 class="card-title">Xác Thực Hai Yếu Tố (2FA)</h3>
                        <p class="mb-3 text-muted">Bật 2FA để tăng cường bảo mật cho tài khoản của bạn.</p>
                        <button type="button" class="btn btn-outline">Kích Hoạt 2FA</button>
                    </div>
                </div>

                <div id="borrow-history" class="tab-content">
                    <div class="account-card">
                        <h3 class="card-title mb-4">Lịch Sử Các Sách Đã Mượn Và Trả</h3>

                        <div class="history-table-responsive">
                            <table class="history-table">
                                <thead>
                                <tr>
                                    <th>Sách</th>
                                    <th>Ngày Mượn</th>
                                    <th>Ngày Trả</th>
                                    <th>Trạng Thái</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td class="book-title-col">
                                        <div class="book-info-sm">
                                            <div class="book-cover-sm">
                                                <img th:src="@{/img/book-placeholder.jpg}" alt="Cover">
                                            </div>
                                            <div>
                                                <h4>Tư Duy Nhanh Và Chậm</h4>
                                                <p>Daniel Kahneman</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>20/03/2024</td>
                                    <td>27/03/2024</td>
                                    <td><span class="status-badge success">Đã Trả</span></td>
                                </tr>
                                <tr>
                                    <td class="book-title-col">
                                        <div class="book-info-sm">
                                            <div class="book-cover-sm">
                                                <img th:src="@{/img/book-placeholder.jpg}" alt="Cover">
                                            </div>
                                            <div>
                                                <h4>Đắc Nhân Tâm</h4>
                                                <p>Dale Carnegie</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>10/02/2024</td>
                                    <td>17/02/2024</td>
                                    <td><span class="status-badge success">Đã Trả</span></td>
                                </tr>
                                <tr>
                                    <td class="book-title-col">
                                        <div class="book-info-sm">
                                            <div class="book-cover-sm">
                                                <img th:src="@{/img/book-placeholder.jpg}" alt="Cover">
                                            </div>
                                            <div>
                                                <h4>Nhà Giả Kim</h4>
                                                <p>Paulo Coelho</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>01/01/2024</td>
                                    <td>08/01/2024</td>
                                    <td><span class="status-badge success">Đã Trả</span></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="empty-state hidden">
                            <i class="fas fa-book-reader"></i>
                            <h3>Chưa Có Lịch Sử Mượn Trả</h3>
                            <p>Hãy mượn một cuốn sách để bắt đầu!</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const tabContents = document.querySelectorAll('.tab-content');

            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();

                    // Xóa trạng thái active cũ
                    sidebarLinks.forEach(item => item.classList.remove('active'));
                    tabContents.forEach(item => item.classList.remove('active'));

                    // Thêm trạng thái active cho link được click
                    this.classList.add('active');

                    // Hiển thị nội dung tab tương ứng
                    const targetTabId = this.dataset.tab;
                    if (targetTabId) {
                        document.getElementById(targetTabId).classList.add('active');
                    }
                });
            });

            // Logic cho toggle password
            document.querySelectorAll('.toggle-password').forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    const icon = this.querySelector('i');
                    if (input.type === 'password') {
                        input.type = 'text';
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        input.type = 'password';
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            });

            // Tự động kích hoạt tab đầu tiên khi tải trang
            document.querySelector('.sidebar-link.active')?.click();
        });
    </script>
</div>
</body>
</html>